<div th:fragment="addModal">
    <!-- Modal -->
    <div class="modal fade border-0" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
            <div class="modal-content">


                <!--modal header start-->
                <div class="modal-header border-0" style="background-color: #1F2122">
                <span><img style="border-radius: 50%; height: 30px;width: 30px" class="writerProfile" src="">
                        <span class="feedWriter"
                              style="margin-left: 5px; color: white;font-size: 20px;margin-top: 5px"></span></span>
                    <a type="button" class="active" data-bs-dismiss="modal">확인</a>
                </div>
                <!--modal header end-->


                <!--modal body start-->

                <div class="modal-body border-0" style="background-color: #27292A">
                    <div class="d-flex justify-content-center">
                        <div style="margin-left: auto;margin-right: auto; display: inline-block;" class="text-center">
                            <img id="photo" class="rounded" width="250" height="250" src="">
                        </div>
                    </div>

                    <div class="d-flex justify-content-center">
                        <p class="cocktailName" style="color: white;">술이름</p>
                    </div>
                    <div class="d-flex justify-content-center">
                        <p class="feedContent" style="color: whitesmoke"></p>
                    </div>

                    <div style="margin-top: 20px" class="d-flex justify-content-center">
                        <div class="no1">
                            <button style="background-color: transparent;border: none " class="like" onclick=pushLike(this)>
                                <i class="bi bi-emoji-heart-eyes-fill" style="font-size: 1.5rem;color: #ADB5BD"></i>
                            </button>
                        </div>
                        <div class="no2">
                            <button style="background-color: transparent;border: none " class="hate"
                                    onclick=deleteLike(this)><i class="bi bi-emoji-heart-eyes-fill"
                                                                style="font-size: 1.5rem; color: #EC6090"></i>
                            </button>
                        </div>
                    </div>
                    <div style="margin-top: -8px; margin-bottom: -15px" class="d-flex justify-content-center">
                        <p style="font-size: 12px; color: white" class="NumberOfLike"></p>
                    </div>


                </div>
                <!--modal body end-->

                <!--modal footer start-->

                <div id="updateDelete" class="modal-footer border-0" style="background-color: #1F2122;">
                    <!--                <div class="updateDelete">-->
                    <form class="deleteFeed" method="post">
                        <button type="submit">삭제</button>
                    </form>
                    <form class="updateFeed" method="get">
                        <button>수정</button>
                    </form>
                    <!--                </div>-->
                </div>

                <!--modal footer end-->

            </div>
        </div>
    </div>
    <!--modal end-->

    <script>
        function onClick(arg) {
            id = arg.children[0].children[0].attributes[0].nodeValue;

            $.ajax({
                url: "/feed/" + id, // (Required) 요청이 전송될 URL 주소
                type: "GET", // (default: ‘GET’) http 요청 방식
                data: {
                    feedId: id
                },
                success: function (data, status, xhr) {
                    let whetherLike = data.whetherLike;
                    if (!whetherLike) {
                        $('.no1')[0].style.display = "inline-block";
                        $('.no2')[0].style.display = "none";
                    } else {
                        $('.no1')[0].style.display = "none";
                        $('.no2')[0].style.display = "inline-block";
                    }
                    let whetherWriter = data.whetherWriter
                    if (whetherWriter) {
                    } else {
                        $('#updateDelete')[0].style.display = "none"

                    }
                    document.getElementsByClassName("feedContent")[0].textContent = data.feed.content;
                    document.getElementsByClassName("feedWriter")[0].textContent = data.feedWriter.name;
                    document.getElementsByClassName("writerProfile")[0].src = data.feedWriter.profileImage;
                    document.getElementsByClassName("cocktailName")[0].textContent = data.cocktailName;
                    document.getElementsByClassName("NumberOfLike")[0].textContent = data.NumberOfLike;
                    document.getElementsByClassName("like")[0].value = data.feedId;
                    document.getElementsByClassName("hate")[0].value = data.feedId;
                    document.getElementsByClassName("deleteFeed")[0].action = "/feed/delete/" + id;
                    document.getElementsByClassName("updateFeed")[0].action = "/feed/update/" + id;
                    document.getElementById("photo").src = data.photo;

                },
                error: function (xhr, status, error) {
                    // 응답을 받지 못하거나 정상적인 응답이지만 데이터 형식을 확인할 수 없는 경우
                },

            });
        }

        function pushLike(arg) {
            id = arg.value
            $.ajax({
                url: "/like", // (Required) 요청이 전송될 URL 주소
                type: "POST", // (default: ‘GET’) http 요청 방식
                data: {
                    feedId: id
                },
                success: function (data, status, xhr) {

                    document.getElementsByClassName("no1")[0].style.display = "none";
                    document.getElementsByClassName("no2")[0].style.display = "inline-block";
                    document.getElementsByClassName("NumberOfLike")[0].textContent = data.numberOfLike;
                },
                error: function (xhr, status, error) {
                    // 응답을 받지 못하거나 정상적인 응답이지만 데이터 형식을 확인할 수 없는 경우
                },

            });
        }

        function deleteLike(arg) {
            id = arg.value
            $.ajax({
                url: "/like/cancel", // (Required) 요청이 전송될 URL 주소
                type: "POST", // (default: ‘GET’) http 요청 방식
                data: {
                    feedId: id
                },
                success: function (data, status, xhr) {
                    document.getElementsByClassName("no1")[0].style.display = "inline-block";
                    document.getElementsByClassName("no2")[0].style.display = "none";
                    document.getElementsByClassName("NumberOfLike")[0].textContent = data.numberOfLike;
                },
                error: function (xhr, status, error) {
                },

            });
        }

    </script>
</div>